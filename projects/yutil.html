<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement;var e=localStorage.getItem('theme');if(!e)return localStorage.setItem('theme','system'),d.setAttribute('data-theme', 'system');if("system"===e){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.setAttribute('data-theme', 'dark'):d.setAttribute('data-theme', 'light')}else d.setAttribute('data-theme', e)}catch(e){}}()</script><title>yutil</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/9363687da4c12b810564.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9363687da4c12b810564.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-3a770ef49c16d17151b4.js" defer=""></script><script src="/_next/static/chunks/framework-3af989d3dbeb77832f99.js" defer=""></script><script src="/_next/static/chunks/main-40f76118f06e75475bd6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-360e10ab17d8216d5d54.js" defer=""></script><script src="/_next/static/chunks/347-5fa4d13528b220adbaed.js" defer=""></script><script src="/_next/static/chunks/pages/projects/%5Bname%5D-789768b0e898ea0a19ff.js" defer=""></script><script src="/_next/static/c9--cIptKB1ISt-tMA3eA/_buildManifest.js" defer=""></script><script src="/_next/static/c9--cIptKB1ISt-tMA3eA/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.2.1"></style></head><body><div id="__next"><div id="modal-root"></div><button class="m-2 bg-accent-primary hover:bg-accent-secondary text-white font-bold py-2 px-4 rounded">Edit This Site</button><select class="bg-bg-primary py-2 px-4 rounded w-32" disabled=""><option>Theme not loaded</option></select><a class="m-2 bg-accent-primary hover:bg-accent-secondary text-white font-bold py-2 px-4 rounded" href="/">Home</a><a class="m-2 bg-accent-primary hover:bg-accent-secondary text-white font-bold py-2 px-4 rounded" href="/blog">Blog</a><a class="m-2 bg-accent-primary hover:bg-accent-secondary text-white font-bold py-2 px-4 rounded" href="/projects">Projects</a><article class="m-6"><h1>yutil</h1><h2>Common functionality for working with YAML files</h2><div class="prose lg:prose-xl"><h1>yutil</h1>
<p><a href="https://github.com/amplia-iiot/yutil/releases/latest"><img src="https://img.shields.io/github/release/amplia-iiot/yutil.svg" alt="Latest Release"/></a>
<a href="https://github.com/amplia-iiot/yutil/actions/workflows/test.yml"><img src="https://github.com/amplia-iiot/yutil/workflows/Test/badge.svg" alt="Test Status"/></a>
<a href="https://github.com/amplia-iiot/yutil/actions/workflows/lint.yml"><img src="https://github.com/amplia-iiot/yutil/workflows/Lint/badge.svg" alt="Lint Status"/></a>
<a href="https://codecov.io/gh/amplia-iiot/yutil"><img src="https://img.shields.io/codecov/c/github/amplia-iiot/yutil/main.svg" alt="Codecov report"/></a>
<a href="https://www.conventionalcommits.org/en/v1.0.0/"><img src="https://img.shields.io/badge/Conventional%20Commits-1.0.0-yellow.svg" alt="Conventional Commits"/></a>
<a href="https://github.com/amplia-iiot/yutil/blob/main/LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="MIT License"/></a></p>
<p>Common functionality for working with YAML files</p>
<h2>Table of contents</h2>
<ul>
<li><a href="/projects/yutil#yutil">yutil</a>
<ul>
<li><a href="/projects/yutil#table-of-contents">Table of contents</a></li>
<li><a href="/projects/yutil#features">Features</a></li>
<li><a href="/projects/yutil#getting-started">Getting started</a>
<ul>
<li><a href="/projects/yutil#installation">Installation</a>
<ul>
<li><a href="/projects/yutil#debrpmapk">deb/rpm/apk:</a></li>
<li><a href="/projects/yutil#manual">Manual</a></li>
<li><a href="/projects/yutil#go-users">Go users</a></li>
</ul>
</li>
<li><a href="/projects/yutil#test-installation">Test installation</a></li>
<li><a href="/projects/yutil#quick-start">Quick Start</a>
<ul>
<li><a href="/projects/yutil#format">Format</a></li>
<li><a href="/projects/yutil#merge">Merge</a></li>
<li><a href="/projects/yutil#external-configuration">External configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/projects/yutil#development">Development</a></li>
<li><a href="/projects/yutil#release-process">Release Process</a></li>
<li><a href="/projects/yutil#changelog">CHANGELOG</a></li>
<li><a href="/projects/yutil#license">License</a></li>
</ul>
</li>
</ul>
<h2>Features</h2>
<ul>
<li><a href="/projects/yutil#merge">Merge</a> files</li>
</ul>
<h2>Getting started</h2>
<h3>Installation</h3>
<p>Install <code>yutil</code> with your preferred method:</p>
<h4>deb/rpm/apk:</h4>
<p>Download the .deb, .rpm or .apk from the <a href="https://github.com/amplia-iiot/yutil/releases/latest">latest release</a> and install them with the appropriate tools.</p>
<h4>Manual</h4>
<p>Download the <code>.tar.gz</code> from the <a href="https://github.com/amplia-iiot/yutil/releases/latest">latest release</a> and add the binary to your path.</p>
<h4>Go users</h4>
<pre><code>go install github.com/amplia-iiot/yutil@latest
</code></pre>
<h3>Test installation</h3>
<pre><code>yutil version
</code></pre>
<h3>Quick Start</h3>
<pre><code>yutil help
</code></pre>
<h4>Format</h4>
<p>This outputs a formatted <em>YAML</em> file or files. That includes sorting its nodes alphabetically and cleaning the format of the values:</p>
<ul>
<li><em>Strings</em> that do not need quotes to remain a primitive string lose the quotes. When quotes are needed, <strong>single quotes</strong> are preferred for strings with special characters. For strings containing a <em>number</em>, <em>boolean</em> or <em>null</em> values, <strong>double quotes</strong> are used. Unicode escape sequences in a string are replaced with the character.</li>
<li>The proper formatting for <em>null</em> is <code>null</code>, not <code>Null</code>. The same happens to <em>boolean</em> values, <strong>lowercase</strong> is used when formatting.</li>
<li><em>Arrays</em> maintain the order of elements, and each element appears on a new line.</li>
<li>Comments are removed.</li>
</ul>
<blockquote>
<p>Check the <a href="./pkg/format/content_test.go">tests</a> for examples.</p>
</blockquote>
<p>To see and format the content of a <em>YAML</em> file use:</p>
<pre><code>yutil format file.yml
</code></pre>
<p>Use <code>-o</code> (<code>--output</code>) option if you want to output to a file instead of <em>stdout</em>.</p>
<pre><code>yutil format file.yml -o file.formatted.yml
</code></pre>
<p>By default <code>yutil</code> uses <em>stdin</em> as <em>YAML</em> content if available:</p>
<pre><code>cat file.yml | yutil format &gt; file.formatted.yml
</code></pre>
<p>You may ignore this input (<code>--no-input</code>) if you can&#x27;t control what&#x27;s piped to <code>yutil</code>:</p>
<pre><code>echo &quot;this is not a yaml&quot; | yutil --no-input format file.yml &gt; file.formatted.yml
</code></pre>
<p>If you want to format a <em>YAML</em> file and store the result in the same file use in-place formatting with <code>-i</code> (<code>--in-place</code>). You may pass as many <em>YAML</em> files as desired:</p>
<pre><code>yutil -i file.yml
yutil -i file1.yml file2.yml file3.yml
</code></pre>
<p>Use <code>-s</code> (<code>--suffix</code>) to make a backup before formatting the file/s:</p>
<pre><code>yutil -s .bak file1.yml file2.yml file3.yml
</code></pre>
<p>This will make a copy the files (<code>file1.yml.bak</code>, <code>file2.yml.bak</code> and <code>file3.yml.bak</code>) and save the formatted <em>YAML</em> in the original files.</p>
<blockquote>
<p>When using <code>-s</code>, in-place formatting is implicit and there&#x27;s no need to also use <code>-i</code>.</p>
</blockquote>
<p>In-place formatting does not allow for <em>stdin</em> to be used as input, if something is piped to <code>yutil</code> an error will be displayed. Use <code>--no-input</code> to ignore <em>stdin</em> input.</p>
<h4>Merge</h4>
<p>This outputs a formatted (ordered and cleaned) <em>YAML</em> file resulting of merging the passed yaml files (or content).</p>
<p>The files are merged in ascending level of importance in the hierarchy. A yaml node in the last file replaces values in
any previous file. You may pass as many <em>YAML</em> files as desired:</p>
<pre><code>yutil merge base.yml changes.yml
yutil merge base.yml changes.yml important.yml
</code></pre>
<p>Use <code>-o</code> (<code>--output</code>) option if you want to output to a file instead of <em>stdout</em>.</p>
<pre><code>yutil merge base.yml changes.yml -o merged.yml
</code></pre>
<p>By default <code>yutil</code> uses <em>stdin</em> as the first <em>YAML</em> content:</p>
<pre><code>cat base.yml | yutil merge changes.yml &gt; merged.yml
</code></pre>
<p>You may ignore this input (<code>--no-input</code>) if you can&#x27;t control what&#x27;s piped to <code>yutil</code>:</p>
<pre><code>echo &quot;this is not a yaml&quot; | yutil --no-input merge base.yml changes.yml
</code></pre>
<h4>External configuration</h4>
<p>You may want to always use the same config without writting the flags, <code>yutil</code> reads a <em>YAML</em> file to configure itself from the current folder or the user home dir in these order of precedence:</p>
<ul>
<li><code>.yutil.yaml</code> in current folder</li>
<li><code>.yutil.yml</code> in current folder</li>
<li><code>.yutil</code> in current folder</li>
<li><code>.yutil.yaml</code> in user home dir</li>
<li><code>.yutil.yml</code> in user home dir</li>
<li><code>.yutil</code> in user home dir</li>
</ul>
<p>Sample configuration file:</p>
<pre><code># Disable stdin
no-input: true
# Merge specific config
merge:
  # Merge output file
  output: /tmp/merged.yml
</code></pre>
<p>You may pass as argument the desired config file:</p>
<pre><code># Including extension to support multiple config types
./yutil version --config config.properties
</code></pre>
<blockquote>
<p>Supported formats: JSON, TOML, YAML, HCL, envfile and Java properties config files</p>
</blockquote>
<h2>Development</h2>
<ol>
<li>Use Golang version <code>&gt;= 1.16</code></li>
<li>Fork (<a href="https://github.com/amplia-iiot/yutil">https://github.com/amplia-iiot/yutil</a>)</li>
<li>Run <code>make set-up</code> to install dev tools</li>
<li>Create a feature branch</li>
<li>Check changes (test &amp; lint) with <code>make check</code></li>
<li>Commit your changes following <a href="https://www.conventionalcommits.org/en/v1.0.0/">Conventional Commits</a></li>
<li>Rebase your local changes against the upstream <em>main</em> branch</li>
<li>Create a Pull Request</li>
</ol>
<p>You are welcome to report bugs or add feature requests and comments in <a href="https://github.com/amplia-iiot/yutil/issues">issues</a>.</p>
<h2>Release Process</h2>
<p><code>make version</code> contains the steps to generate a new version. It uses <code>svu</code> to calculate the next version number based on the <em>git log</em> and generates the <a href="./CHANGELOG.md">CHANGELOG.md</a> with <code>git-chglog</code></p>
<p>Push the generated <em>tag</em> and the <em>release</em> workflow will generate the release.</p>
<p>Or you can trigger a manual run of the <a href="https://github.com/amplia-iiot/yutil/actions/workflows/release.yml"><em>release</em> workflow</a> with <em>preview</em> set to <code>false</code> to generate the commit and tag automatically.</p>
<h2>CHANGELOG</h2>
<p>See <a href="./CHANGELOG.md">CHANGELOG.md</a></p>
<h2>License</h2>
<p><a href="./LICENSE">MIT © amplia-iiot</a></p></div></article></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"project":{"name":"yutil","description":"Common functionality for working with YAML files","url":"https://github.com/amplia-iiot/yutil","readme":"# yutil\n\n[![Latest Release](https://img.shields.io/github/release/amplia-iiot/yutil.svg)](https://github.com/amplia-iiot/yutil/releases/latest)\n[![Test Status](https://github.com/amplia-iiot/yutil/workflows/Test/badge.svg)](https://github.com/amplia-iiot/yutil/actions/workflows/test.yml)\n[![Lint Status](https://github.com/amplia-iiot/yutil/workflows/Lint/badge.svg)](https://github.com/amplia-iiot/yutil/actions/workflows/lint.yml)\n[![Codecov report](https://img.shields.io/codecov/c/github/amplia-iiot/yutil/main.svg)](https://codecov.io/gh/amplia-iiot/yutil)\n[![Conventional Commits](https://img.shields.io/badge/Conventional%20Commits-1.0.0-yellow.svg)](https://www.conventionalcommits.org/en/v1.0.0/)\n[![MIT License](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/amplia-iiot/yutil/blob/main/LICENSE)\n\nCommon functionality for working with YAML files\n\n## Table of contents\n\n- [yutil](#yutil)\n\t- [Table of contents](#table-of-contents)\n\t- [Features](#features)\n\t- [Getting started](#getting-started)\n\t\t- [Installation](#installation)\n\t\t\t- [deb/rpm/apk:](#debrpmapk)\n\t\t\t- [Manual](#manual)\n\t\t\t- [Go users](#go-users)\n\t\t- [Test installation](#test-installation)\n\t\t- [Quick Start](#quick-start)\n\t\t\t- [Format](#format)\n\t\t\t- [Merge](#merge)\n\t\t\t- [External configuration](#external-configuration)\n\t- [Development](#development)\n\t- [Release Process](#release-process)\n\t- [CHANGELOG](#changelog)\n\t- [License](#license)\n\n## Features\n\n- [Merge](#merge) files\n\n## Getting started\n\n### Installation\n\nInstall `yutil` with your preferred method:\n\n#### deb/rpm/apk:\n\nDownload the .deb, .rpm or .apk from the [latest release] and install them with the appropriate tools.\n\n#### Manual\n\nDownload the `.tar.gz` from the [latest release] and add the binary to your path.\n\n#### Go users\n\n```bash\ngo install github.com/amplia-iiot/yutil@latest\n```\n\n### Test installation\n\n```bash\nyutil version\n```\n\n### Quick Start\n\n```bash\nyutil help\n```\n\n#### Format\n\nThis outputs a formatted _YAML_ file or files. That includes sorting its nodes alphabetically and cleaning the format of the values:\n- _Strings_ that do not need quotes to remain a primitive string lose the quotes. When quotes are needed, **single quotes** are preferred for strings with special characters. For strings containing a _number_, _boolean_ or _null_ values, **double quotes** are used. Unicode escape sequences in a string are replaced with the character.\n- The proper formatting for _null_ is `null`, not `Null`. The same happens to _boolean_ values, **lowercase** is used when formatting.\n- _Arrays_ maintain the order of elements, and each element appears on a new line.\n- Comments are removed.\n\n\u003e Check the [tests](./pkg/format/content_test.go) for examples.\n\nTo see and format the content of a _YAML_ file use:\n\n```bash\nyutil format file.yml\n```\n\nUse `-o` (`--output`) option if you want to output to a file instead of _stdout_.\n\n```bash\nyutil format file.yml -o file.formatted.yml\n```\n\nBy default `yutil` uses _stdin_ as _YAML_ content if available:\n\n```bash\ncat file.yml | yutil format \u003e file.formatted.yml\n```\n\nYou may ignore this input (`--no-input`) if you can't control what's piped to `yutil`:\n\n```bash\necho \"this is not a yaml\" | yutil --no-input format file.yml \u003e file.formatted.yml\n```\n\nIf you want to format a _YAML_ file and store the result in the same file use in-place formatting with `-i` (`--in-place`). You may pass as many _YAML_ files as desired:\n\n```bash\nyutil -i file.yml\nyutil -i file1.yml file2.yml file3.yml\n```\n\nUse `-s` (`--suffix`) to make a backup before formatting the file/s:\n\n```bash\nyutil -s .bak file1.yml file2.yml file3.yml\n```\n\nThis will make a copy the files (`file1.yml.bak`, `file2.yml.bak` and `file3.yml.bak`) and save the formatted _YAML_ in the original files.\n\n\u003e When using `-s`, in-place formatting is implicit and there's no need to also use `-i`.\n\nIn-place formatting does not allow for _stdin_ to be used as input, if something is piped to `yutil` an error will be displayed. Use `--no-input` to ignore _stdin_ input.\n\n#### Merge\n\nThis outputs a formatted (ordered and cleaned) _YAML_ file resulting of merging the passed yaml files (or content).\n\nThe files are merged in ascending level of importance in the hierarchy. A yaml node in the last file replaces values in\nany previous file. You may pass as many _YAML_ files as desired:\n\n```bash\nyutil merge base.yml changes.yml\nyutil merge base.yml changes.yml important.yml\n```\n\nUse `-o` (`--output`) option if you want to output to a file instead of _stdout_.\n\n```bash\nyutil merge base.yml changes.yml -o merged.yml\n```\n\nBy default `yutil` uses _stdin_ as the first _YAML_ content:\n\n```bash\ncat base.yml | yutil merge changes.yml \u003e merged.yml\n```\n\nYou may ignore this input (`--no-input`) if you can't control what's piped to `yutil`:\n\n```bash\necho \"this is not a yaml\" | yutil --no-input merge base.yml changes.yml\n```\n\n#### External configuration\n\nYou may want to always use the same config without writting the flags, `yutil` reads a _YAML_ file to configure itself from the current folder or the user home dir in these order of precedence:\n- `.yutil.yaml` in current folder\n- `.yutil.yml` in current folder\n- `.yutil` in current folder\n- `.yutil.yaml` in user home dir\n- `.yutil.yml` in user home dir\n- `.yutil` in user home dir\n\nSample configuration file:\n\n```yaml\n# Disable stdin\nno-input: true\n# Merge specific config\nmerge:\n  # Merge output file\n  output: /tmp/merged.yml\n```\n\nYou may pass as argument the desired config file:\n\n```bash\n# Including extension to support multiple config types\n./yutil version --config config.properties\n```\n\n\u003e Supported formats: JSON, TOML, YAML, HCL, envfile and Java properties config files\n\n## Development\n\n1. Use Golang version `\u003e= 1.16`\n2. Fork (https://github.com/amplia-iiot/yutil)\n3. Run `make set-up` to install dev tools\n4. Create a feature branch\n5. Check changes (test \u0026 lint) with `make check`\n6. Commit your changes following [Conventional Commits]\n7. Rebase your local changes against the upstream _main_ branch\n8. Create a Pull Request\n\nYou are welcome to report bugs or add feature requests and comments in [issues].\n\n## Release Process\n\n`make version` contains the steps to generate a new version. It uses `svu` to calculate the next version number based on the _git log_ and generates the [CHANGELOG.md] with `git-chglog`\n\nPush the generated _tag_ and the _release_ workflow will generate the release.\n\nOr you can trigger a manual run of the [_release_ workflow](https://github.com/amplia-iiot/yutil/actions/workflows/release.yml) with _preview_ set to `false` to generate the commit and tag automatically.\n\n## CHANGELOG\n\nSee [CHANGELOG.md]\n\n## License\n\n[MIT © amplia-iiot](./LICENSE)\n\n[latest release]: https://github.com/amplia-iiot/yutil/releases/latest\n[Conventional Commits]: https://www.conventionalcommits.org/en/v1.0.0/\n[issues]: https://github.com/amplia-iiot/yutil/issues\n[CHANGELOG.md]: ./CHANGELOG.md\n","languages":["Go","Makefile","Shell"]}},"__N_SSG":true},"page":"/projects/[name]","query":{"name":"yutil"},"buildId":"c9--cIptKB1ISt-tMA3eA","runtimeConfig":{},"isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>